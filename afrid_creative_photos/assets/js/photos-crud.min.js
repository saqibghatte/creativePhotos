function getSinglePhotos() {
    window.$_GET = new URLSearchParams(location.search);
    var a = $_GET.get('photos_id');
    $.ajax({
        url: 'required/photos-ajax.php',
        type: 'POST',
        data: {
            photos_id: a
        },
        success: function (a) {
            if ((a == 'false')) window.location.href = 'photos';
            for (var e in a = JSON.parse(a)) $('#view' + e).html(a[e]);
            $('#actions').html(a.Actions)
        }
    })
}

function load_photos_data() {
    var a = [];
    $('.listOfPhotos tfoot').find('th').each(function () {
        a.push({
            mData: $(this).text()
        })
    }), $('.listOfPhotos').DataTable({
        aoColumns: a,
        lengthMenu: [
            [20, 50, 500, 1000],
            [20, 50, 500, 1000],
        ],
        ajax: $.fn.dataTable.pipeline({
            url: 'required/photos-ajax.php',
            pages: 5,
            type: 'POST',
            data: function (a) {
                window.$_GET = new URLSearchParams(location.search);
                (binData = $_GET.get('bin')), binData == 'true' ? (a.recycleBin = 'true') : (a.recycleBin = 'false');
                a.detailsOf = 'photos', $('.noExl').find('th').each(function () {
                    searchTargets = $(this).find('input,select'), void 0 !== searchTargets.attr('id') && (key = searchTargets.attr('id'), a[key] = searchTargets.val())
                });
                a["searchThroughOut"] = $("#throughOut").val();
            }
        })
    })
}
present_page = location.pathname.split('/').slice(-1)[0], present_page = present_page.replace('.php', ''), 'photos' == present_page && (toCall = 'load_photos_data'), 'photos-view' == present_page && (toCall = 'getSinglePhotos'), page_name = getPageName(), page_name = page_name.split('-');
$("#deletePhotos").on("hide.bs.modal", function () {
    $(".modal-body").find('[type="hidden"]').val(null);
});
$("#deletePhotos").on("show.bs.modal", function (event) {
    var modal = $(this);
    var button = $(event.relatedTarget);
    modal.find('[name="photosDeleteId"]').val(button.data("id"));
});
$(document.body).on('click', "[name='deletePhotos']", function (a) {
    a.preventDefault(), element = $(this), photosDeleteId = $(this).closest('.modal').find("[name='photosDeleteId']").val(), data = {
        photosDeleteId: photosDeleteId,
        deletePhotos: !0
    }, redirect = '', 'photos-view' == getPageName() && (redirect = 'photos'), deleteFromServer('required/photos-ajax.php', data, redirect, 'delete')
});
$("#restorePhotos").on("hide.bs.modal", function () {
    $(".modal-body").find('[type="hidden"]').val(null);
});
$("#restorePhotos").on("show.bs.modal", function (event) {
    var modal = $(this);
    var button = $(event.relatedTarget);
    modal.find('[name="photosRestoreId"]').val(button.data("id"));
});
$(document.body).on('click', "[name='restorePhotos']", function (a) {
    a.preventDefault(), element = $(this), photosRestoreId = $(this).closest('.modal').find("[name='photosRestoreId']").val(), data = {
        photosRestoreId: photosRestoreId,
        restorePhotos: !0
    }, redirect = '', 'photos-view' == getPageName() && (redirect = 'photos'), deleteFromServer('required/photos-ajax.php', data, redirect, 'restore')
});
$('#managePhotosForm').submit(function (a) {
    a.preventDefault();
    if (typeof CKEDITOR !== "undefined") {
        $(".ckeditor").each(function () {
            CKEDITOR.instances[$(this).attr("id")].updateElement();
        });
    }
    element = $(this), form_data = new FormData(this), pushToServer(form_data, 'required/photos-ajax.php', 'Photos')
}), $(document.body).on('click', '.closeManagePhotos', function () {
    hideForm('Photos')
}), $(document).on('keydown', function (a) {
    'Escape' == a.key && 'none' != $('#managePhotos').css('display') && hideForm('Photos')
});
$(document.body).on("click", ".duplicatePhotos,.editPhotos,.addPhotos", function (event) {
    $(".hideInEdit,.hideInAdd").show();
    $(".rowAction").removeClass("show");
    var modal = $("#managePhotos");
    var button = $(this);
    modal.find('[name="modifyingPhotos"]').val(button.data("id"));
    modal.find('modalTitle,[name="managePhotos"]').text(button.data("modaltitle"));
    if (+button.data("id") == -1) {
        modal.find("duplicateTitle").text(button.data("duplicatetitle"));
        $(".hideInEdit").hide();
    }
    if (+button.data("id") == 0) {
        $(".hideInAdd").hide();
        modal.find("duplicateTitle").text("");
        modal.find('[type="password"]').removeAttr("required");
    }
    if (+button.data("id") > 0 || +button.data("id") == -1) {
        if (+button.data("id") > 0) modal.find("duplicateTitle").text("");
        modal.find('[type="password"]').removeAttr("required");
        $(".hideInEdit").hide();
        modal.find('.imageUploadContainer').eq(0).find('img').attr('src', 'assets/images/photos/' + button.data('photos'));
        $("[name='photos ']").removeAttr('required');
        modal.find('[name="heading"]').val(button.data("heading")).trigger('change');
        modal.find('[name="category"]').val(button.data('category')).trigger('change');
        modal.find('[name="subCategory"]').val(button.data('subcategory')).trigger('change');
    }
    $("#managePhotos").slideDown();
    $(".complete-form-container").slideDown();
    $("#PhotosContainer").slideUp();
});