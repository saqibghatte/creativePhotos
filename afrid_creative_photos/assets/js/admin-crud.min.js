function getSingleAdmin() {
    window.$_GET = new URLSearchParams(location.search);
    var a = $_GET.get('admin_id');
    $.ajax({
        url: 'required/admin-ajax.php',
        type: 'POST',
        data: {
            admin_id: a
        },
        success: function (a) {
            if ((a == 'false')) window.location.href = 'admin';
            for (var e in a = JSON.parse(a)) $('#view' + e).html(a[e]);
            $('#actions').html(a.Actions)
        }
    })
}

function load_admin_data() {
    var a = [];
    $('.listOfAdmin tfoot').find('th').each(function () {
        a.push({
            mData: $(this).text()
        })
    }), $('.listOfAdmin').DataTable({
        aoColumns: a,
        lengthMenu: [
            [20, 50, 500, 1000],
            [20, 50, 500, 1000],
        ],
        ajax: $.fn.dataTable.pipeline({
            url: 'required/admin-ajax.php',
            pages: 5,
            type: 'POST',
            data: function (a) {
                window.$_GET = new URLSearchParams(location.search);
                (binData = $_GET.get('bin')), binData == 'true' ? (a.recycleBin = 'true') : (a.recycleBin = 'false');
                a.detailsOf = 'admin', $('.noExl').find('th').each(function () {
                    searchTargets = $(this).find('input,select'), void 0 !== searchTargets.attr('id') && (key = searchTargets.attr('id'), a[key] = searchTargets.val())
                });
                a["searchThroughOut"] = $("#throughOut").val();
            }
        })
    })
}
present_page = location.pathname.split('/').slice(-1)[0], present_page = present_page.replace('.php', ''), 'admin' == present_page && (toCall = 'load_admin_data'), 'admin-view' == present_page && (toCall = 'getSingleAdmin'), page_name = getPageName(), page_name = page_name.split('-');
$("#deleteAdmin").on("hide.bs.modal", function () {
    $(".modal-body").find('[type="hidden"]').val(null);
});
$("#deleteAdmin").on("show.bs.modal", function (event) {
    var modal = $(this);
    var button = $(event.relatedTarget);
    modal.find('[name="adminDeleteId"]').val(button.data("id"));
});
$(document.body).on('click', "[name='deleteAdmin']", function (a) {
    a.preventDefault(), element = $(this), adminDeleteId = $(this).closest('.modal').find("[name='adminDeleteId']").val(), data = {
        adminDeleteId: adminDeleteId,
        deleteAdmin: !0
    }, redirect = '', 'admin-view' == getPageName() && (redirect = 'admin'), deleteFromServer('required/admin-ajax.php', data, redirect, 'delete')
});
$("#restoreAdmin").on("hide.bs.modal", function () {
    $(".modal-body").find('[type="hidden"]').val(null);
});
$("#restoreAdmin").on("show.bs.modal", function (event) {
    var modal = $(this);
    var button = $(event.relatedTarget);
    modal.find('[name="adminRestoreId"]').val(button.data("id"));
});
$(document.body).on('click', "[name='restoreAdmin']", function (a) {
    a.preventDefault(), element = $(this), adminRestoreId = $(this).closest('.modal').find("[name='adminRestoreId']").val(), data = {
        adminRestoreId: adminRestoreId,
        restoreAdmin: !0
    }, redirect = '', 'admin-view' == getPageName() && (redirect = 'admin'), deleteFromServer('required/admin-ajax.php', data, redirect, 'restore')
});
$('#manageAdminForm').submit(function (a) {
    a.preventDefault();
    if (typeof CKEDITOR !== "undefined") {
        $(".ckeditor").each(function () {
            CKEDITOR.instances[$(this).attr("id")].updateElement();
        });
    }
    element = $(this), form_data = new FormData(this), pushToServer(form_data, 'required/admin-ajax.php', 'Admin')
}), $(document.body).on('click', '.closeManageAdmin', function () {
    hideForm('Admin')
}), $(document).on('keydown', function (a) {
    'Escape' == a.key && 'none' != $('#manageAdmin').css('display') && hideForm('Admin')
});
$(document.body).on("click", ".duplicateAdmin,.editAdmin,.addAdmin", function (event) {
    $(".hideInEdit,.hideInAdd").show();
    $(".rowAction").removeClass("show");
    var modal = $("#manageAdmin");
    var button = $(this);
    modal.find('[name="modifyingAdmin"]').val(button.data("id"));
    modal.find('modalTitle,[name="manageAdmin"]').text(button.data("modaltitle"));
    if (+button.data("id") == -1) {
        modal.find("duplicateTitle").text(button.data("duplicatetitle"));
        $(".hideInEdit").hide();
    }
    if (+button.data("id") == 0) {
        $(".hideInAdd").hide();
        modal.find("duplicateTitle").text("");
        modal.find('[type="password"]').removeAttr("required");
    }
    if (+button.data("id") > 0 || +button.data("id") == -1) {
        if (+button.data("id") > 0) modal.find("duplicateTitle").text("");
        modal.find('[type="password"]').removeAttr("required");
        $(".hideInEdit").hide();
        modal.find('[name="fname"]').val(button.data("fname")).trigger('change');
        modal.find('[name="lname"]').val(button.data("lname")).trigger('change');
        modal.find('[name="email"]').val(button.data('email')).trigger('change');
        modal.find('[name="password"]').val(button.data('password')).trigger('change');
    }
    $("#manageAdmin").slideDown();
    $(".complete-form-container").slideDown();
    $("#AdminContainer").slideUp();
});